<!DOCTYPE html>
<html>
<head><meta charset="utf-8"><title>Redirecting…</title></head>
<body>
  <script>
    (function () {
      // Normalize and split the current path
      const raw = location.pathname.replace(/^\/+/, ''); // drop leading slashes
      const parts = raw.split('/').filter(Boolean);      // ["slug", "rest", ...] or []
      
      // Preserve original query and hash
      const q = location.search || '';
      const h = location.hash || '';

      if (parts.length === 0) {
        // Root → send to root index.html
        window.location.replace('/index.html' + q + h);
        return;
      }

      const slug = parts[0];
      const restParts = parts.slice(1);
      const rest = restParts.join('/');

      // If already at /<slug>/index.html or /<slug>/404.html, do not append #/<index.html>
      if (
        rest === '' ||
        restParts[0] === 'index.html' ||
        restParts[0] === '404.html'
      ) {
        window.location.replace(`/${slug}/index.html${q}${h}`);
        return;
      }

      // For deep paths under a slug, route to that slug's index with hash
      // Example: /services/faq -> /services/index.html#/faq
      window.location.replace(`/${slug}/index.html#/${rest}${q}${h}`);
    })();
  </script>
  <p>Redirecting…</p>
</body>
</html>
